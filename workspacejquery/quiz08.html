<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
        <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>


        <style>
            /* div{
                border: 1px solid black;
            } */
            .container{
                width: 500px;
                height: 100%;
                margin: auto;
            }

            .box1{
                height: 400px;
                border: 1px solid black;
                overflow-y: auto;
                background-color: wheat;
        
            }

            .box2{
                height: 150px;
                border: 1px dotted black;
            }
            .box2>#input{
                width: 100%;
                height: 80%;
                background-color: lavender;
                overflow-y: auto;
                text-align: top;
       
        
            }
            .box2>#emo{
                width: 30px;
                height: 30px;
          
                background-color: blueviolet;
            }
            #emo>button{
                width: 30px;
                height: 30px;
            }
            button>img{
                width: 100%;
                height: 100%;
            }

            .textbubble{
                    position: relative;
                    display: inline-block;
                    /* max-width: calc(100% - 70px); */
                    padding: 10px;
                    margin-top: 7px;
                    font-size: 15px;
                    border-radius: 10px;
                    
                    left: 10px;
                    background-color: white;

            }

            #emobox{
                width: 100%;
                height: 100%;
          
                background-color: beige;
                display: none;
       
               
            }

         .emoti{
            width: 80px;
            height: 80px;
        }
        </style>
    </head>

<body>

    <div class="container">
        <div class="box1" id="chat">
           
           
        </div>
            <div class="box2">
            <div id="input" contenteditable="true">
                
                </div>
                <div id="emo">
                    <button id="emoadd">
                        <img src="emoticon1.png" id="econ01">
                        </button>
                </div>
                 

            </div>
               <div id="emobox">
                    
                        <img src="emoticon1.png" id="econ01" class="emoti">
                        <img src="emoticon2.gif" id="econ02" class="emoti">
                        <img src="emoticon3.gif" id="econ02" class="emoti">
                        <img src="emoticon4.gif" id="econ02" class="emoti">
                        <img src="emoticon5.gif" id="econ02" class="emoti">
                        <img src="emoticon6.gif" id="econ02" class="emoti">
                    
                    </div>
        
    </div>

    <script>

 

        $("#input").on("keydown", function (e){  //엔터키 이벤트
                    let inputcontents = $("#input").html();
                    // let br=$("<br>")
                    let bubble= $("<div>")  //말풍선
                        bubble.addClass("textbubble")
                        bubble.append(inputcontents)
                  
            if(e.keyCode==13 && e.shiftKey==false){
                   $("#chat").append(bubble)
                   $("#chat").append("<br>"); //채팅 받고나서 줄바꿈
                  $("#input").html("")//채팅 입력 후 공란
              
                  
                    $('#chat').scrollTop($('#chat')[0].scrollHeight);

                   
                // $("#econ01").on("click", function () {
                //     $("#chat").append($(this).clone());  // 복사한 객체를 추가.
                // });
                return false;
                }   
        })



          $("#emoadd").on("click", function () {
                $("#emobox").toggle(1000, function () {
                 
                }); //
    
            })

            $("#emobox").on("click", ".emoti",function(){

            $("#input").append($(this).clone());

            })

            //  $("#emoadd").on("click", function () {
            //         $("#emobox").hide(1000, function () {
     
            //         });
            //     })
    </script>
    
</body>
</html>